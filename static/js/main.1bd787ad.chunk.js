(this.webpackJsonpecommerce=this.webpackJsonpecommerce||[]).push([[0],{47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var n=c(2),i=c.n(n),a=c(28),s=c.n(a),r=(c(36),c(6)),o=c(8),l=c.p+"static/media/shopping-cart.66cc7c9b.svg",u=c(31),d=c(1),j=Object(n.createContext)(),b=function(){return Object(n.useContext)(j)},m=function(e){var t=e.children,c=Object(n.useState)([]),i=Object(r.a)(c,2),a=i[0],s=i[1],o=function(e){var t=e.sort((function(e,t){return e.product.id>t.product.id?1:-1}));s(t),sessionStorage.setItem("react-cart",JSON.stringify(t))},l=function(e){var t=a.slice(),c=t.findIndex((function(t){return t.product.id===e.product.id}));t[c].quantity!==e.quantity&&(t.splice(c,1,e),o(t))},b=function(e){return a.some((function(t){return t.product.id===e}))};return Object(n.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("react-cart"));e&&e.length>0&&s(e)}),[]),Object(d.jsx)(j.Provider,{value:{cart:a,addItem:function(e){b(e.product.id)?l(e):o([].concat(Object(u.a)(a),[e]))},removeItem:function(e){var t=a.filter((function(t){return t.product.id!==e}));o(t)},updateCart:o,getItemsCount:function(){return a.length},hasItemsInCart:function(){return a.length>0},calculateTotal:function(){return a.reduce((function(e,t){return e+t.product.price*t.quantity}),0)},clearCart:function(){s([]),sessionStorage.removeItem("react-cart")}},children:t})},h=function(){var e=b(),t=e.getItemsCount,c=e.hasItemsInCart;return Object(d.jsxs)("div",{className:" is-relative block is-flex is-aling-items-center",children:[Object(d.jsx)("img",{className:"mr-1",title:"Cart",src:l,alt:"Cart"}),Object(d.jsx)("small",{className:"tag is-small ".concat(c()?"is-info is-light":"is-invisible"),children:t()})]})},O=c.p+"static/media/logo.574ba80e.svg",x=function(){return Object(d.jsxs)("figure",{className:"logo-container",children:[Object(d.jsx)("img",{src:O,alt:"Website Logo",className:"navbar-logo"}),Object(d.jsx)("figcaption",{className:"has-text-white",children:"Tu Tienda On-Line"})]})},f=function(e){var t=e.categories;return Object(d.jsx)(d.Fragment,{children:t.map((function(e){var t=e.id,c=e.title;return Object(d.jsx)("li",{className:"navbar-item is-hoverable",children:Object(d.jsx)(o.c,{to:"/category/".concat(c),className:"navbar-link is-arrowless has-text-white",activeClassName:"has-background-black-ter",children:c})},t)}))})},p=c(27),v=c.n(p),g=c(30),N=c(10),y=c(21),k=(c(52),y.a.initializeApp({apiKey:"AIzaSyCZVzvjxShnvfFudb0gzFjGYiJlmsEnJcE",authDomain:"react-ecommerce-9f16c.firebaseapp.com",projectId:"react-ecommerce-9f16c",storageBucket:"react-ecommerce-9f16c.appspot.com",messagingSenderId:"333753510959",appId:"1:333753510959:web:fdcb019bbd5176581b6ada"})),C=function(e){return e.map((function(e){return S(e)}))},S=function(e){return Object(N.a)({id:e.id},e.data())},w=y.a.firestore(k);function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=c?w.collection("products").where("category","==",n):w.collection("products");i.get().then((function(t){return e(C(t.docs))})).catch((function(e){return console.log(e)})).finally(t)}function z(){return(z=Object(g.a)(v.a.mark((function e(t){var c,n,i,a,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){e.forEach((function(e,c){var a=e.data().stock,s=t[c],r=s.quantity,o=s.product.id;a>=r?n.update(e.ref,{stock:a-r}):i.push(o)}))},c=w.collection("products").where(y.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.product.id}))),n=w.batch(),i=[],e.next=6,c.get();case 6:if(s=e.sent,a(s.docs),0!==i.length){e.next=13;break}return n.commit(),e.abrupt("return",{items:[],hasErrorOnSubmit:!1});case 13:return e.abrupt("return",{items:t.filter((function(e){return!i.includes(e.product.id)})),hasErrorOnSubmit:!0});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c(47);var A=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)(!1),s=Object(r.a)(a,2),l=s[0],u=s[1];return Object(n.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};w.collection("categories").get().then((function(t){return e(C(t.docs))})).catch((function(e){return console.log(e)})).finally(t)}((function(e){return i(e)}))}),[]),Object(d.jsxs)("nav",{className:"navbar is-dark",role:"navigation","aria-describedby":"main navigation",children:[Object(d.jsxs)("div",{className:"navbar-brand is-align-items-center",children:[Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)(x,{})}),Object(d.jsxs)("button",{className:"navbar-burger ".concat(l?"is-active":""),"aria-label":"menu","aria-expanded":"false",onClick:function(){return u(!l)},children:[Object(d.jsx)("span",{"aria-hidden":"true"}),Object(d.jsx)("span",{"aria-hidden":"true"}),Object(d.jsx)("span",{"aria-hidden":"true"})]})]}),Object(d.jsxs)("div",{className:"navbar-menu ".concat(l?"is-active":""," has-background-grey-darker"),children:[Object(d.jsx)("ul",{className:"navbar-start",children:c&&Object(d.jsx)(f,{categories:c})}),Object(d.jsx)("ul",{className:"navbar-end",children:Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsx)(o.b,{to:"/cart",children:Object(d.jsx)(h,{})})})})]})]})},E=(c(48),function(){return Object(d.jsx)("div",{className:"loader-wrapper is-active",children:Object(d.jsx)("div",{className:"loader is-loading"})})}),L=Object(n.createContext)(),q=function(){return Object(n.useContext)(L)},F=function(e){var t=e.children,c=Object(n.useState)(!0),i=Object(r.a)(c,2),a=i[0],s=i[1],o=Object(n.useState)({titlte:"",description:"",type:"",isActive:!1,closeAction:null}),l=Object(r.a)(o,2),u=l[0],j=l[1],b=Object(n.useCallback)((function(){return s(!0)}),[]),m=Object(n.useCallback)((function(){return s(!1)}),[]);return Object(d.jsx)(L.Provider,{value:{isLoading:a,notification:u,showLoader:b,hideLoader:m,createNotification:function(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return j({title:e,description:t,type:c,isActive:!0,closeAction:n})},removeNotification:function(){return j(Object(N.a)(Object(N.a)({},u),{},{isActive:!1}))}},children:t})},T=function(e){return function(t){var c=q().isLoading;return Object(d.jsxs)(d.Fragment,{children:[c&&Object(d.jsx)(E,{}),Object(d.jsx)(e,Object(N.a)(Object(N.a)({},t),{},{visibility:c?"is-hidden":"is-visible"}))]})}},D=function(e){var t=e.id,c=e.title,n=e.price,i=e.imgURL;return Object(d.jsxs)("article",{className:"card has-text-centered",children:[Object(d.jsx)("header",{className:"card-header is-justify-content-center",children:Object(d.jsx)("figure",{className:"card-image p-1",children:Object(d.jsx)("img",{className:"image",src:i,alt:""})})}),Object(d.jsxs)("section",{className:"card-content",children:[Object(d.jsx)("h2",{className:"subtitle mb-1 is-size-3-mobile is-size-4-desktop",children:c}),Object(d.jsxs)("b",{className:"is-block mb-1 is-size-4-mobile is-size-5-desktop",children:["$",n]})]}),Object(d.jsx)("footer",{className:"card-footer is-flex-direction-column is-align-items-center p-2",children:Object(d.jsx)(o.b,{to:"/product/".concat(t),children:Object(d.jsx)("button",{role:"link",className:"button is-link is-light",type:"button",title:"See details",children:"Detalles"})})})]})},P=function(e){var t=e.items;return Object(d.jsx)("div",{className:"columns is-multiline is-centered",children:t.map((function(e){return Object(d.jsx)("div",{className:"column is-narrow is-flex is-justify-content-center",children:Object(d.jsx)(D,Object(N.a)({},e))},e.id)}))})},J=function(){var e=q(),t=e.notification,c=e.removeNotification;return Object(d.jsxs)("div",{className:"modal ".concat(t.isActive?"is-active":""," has-text-centered"),children:[Object(d.jsx)("div",{className:"modal-background"}),Object(d.jsx)("div",{className:"modal-content is-clipped m-3",children:Object(d.jsx)("article",{className:"message is-".concat(t.type),children:Object(d.jsxs)("div",{className:"message-body",children:[Object(d.jsx)("h2",{className:"title",children:t.title}),Object(d.jsx)("p",{className:"content",children:t.description}),Object(d.jsx)("button",{type:"button",className:"button is-".concat(t.type),onClick:function(){c(),t.closeAction()},children:"Cerrar"})]})})})]})},$=function(e){return function(t){var c=q().notification;return Object(d.jsx)(d.Fragment,{children:c.isActive?Object(d.jsx)(J,{}):Object(d.jsx)(e,Object(N.a)({},t))})}},B=function(e){var t=e.list,c=e.submitHandler;return Object(d.jsx)("form",{onSubmit:c,autoComplete:"off",className:"mb-3",children:Object(d.jsxs)("div",{className:"field is-grouped is-flex is-justify-content-center",children:[Object(d.jsxs)("div",{className:"control is-flex-grow-1",children:[Object(d.jsx)("input",{className:"input has-text-centered",type:"search",name:"search-products",id:"search-products","arial-label":"Write the product you want to search",placeholder:"Search a product",list:"products",required:!0}),Object(d.jsx)("datalist",{id:"products",children:t.map((function(e){var t=e.id,c=e.title;return Object(d.jsx)("option",{children:c},t)}))})]}),Object(d.jsx)("div",{className:"control",children:Object(d.jsx)("button",{className:"button is-link is-light",type:"submit","aria-label":"Find product",children:"\ud83d\udd0d"})})]})})},H=c(4),G=$((function(e){var t=e.items,c=Object(n.useState)(null),i=Object(r.a)(c,2),a=i[0],s=i[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),u=l[0],j=l[1],b=q().createNotification;return Object(d.jsxs)("div",{className:"section has-text-centered",children:[Object(d.jsx)("h2",{className:"title mb-3",children:"\xbfQue te gusatria comprar?"}),u?Object(d.jsx)(H.a,{to:"/product/".concat(a)}):Object(d.jsx)(B,{list:t,submitHandler:function(e){e.preventDefault();var c=e.target["search-products"].value,n=(t.find((function(e){return e.title.toLowerCase()===c.toLowerCase()}))||!1).id;n?function(e){s(e),j(!0)}(n):b("Product not found \ud83d\udd0d","The product you searched is not available. Please try again","info")}})]})})),R=T((function(e){var t=e.visibility,c=Object(H.g)().categoryName,i=Object(n.useState)([]),a=Object(r.a)(i,2),s=a[0],o=a[1],l=Object(n.useState)([]),u=Object(r.a)(l,2),j=u[0],b=u[1],m=q(),h=m.showLoader,O=m.hideLoader;return Object(n.useEffect)((function(){I((function(e){return b(e)}))}),[]),Object(n.useEffect)((function(){var e=Boolean(c);h(),I((function(e){return o(e)}),(function(){return O()}),e,c)}),[c,h,O]),Object(d.jsx)("div",{className:"container ".concat(t),children:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(G,{items:j}),Object(d.jsx)(P,{items:s})]})})})),U=function(e){var t=e.stock,c=e.count,n=e.onAdd;return Object(d.jsxs)("div",{className:"level is-inline-flex p-0 m-0",children:[Object(d.jsx)("button",{className:"level-item button is-info is-normal m-0",type:"button",value:-1,disabled:c<=1,onClick:n,title:"Decrement Count","aria-label":"Decrement Count",children:"-"}),Object(d.jsx)("small",{className:"level-item tag is-white is-large m-0",children:c}),Object(d.jsx)("button",{className:"level-item button is-info is-normal m-0",type:"button",value:1,disabled:c>=t,onClick:n,title:"Increment count","aria-label":"Increment count",children:"+"})]})},V=function(e){var t=e.item,c=Object(n.useState)(1),i=Object(r.a)(c,2),a=i[0],s=i[1],l=Object(n.useState)(!1),u=Object(r.a)(l,2),j=u[0],m=u[1],h=b().addItem;return Object(d.jsxs)("article",{className:"card is-flex is-flex-wrap-wrap is-justify-content-center is-align-items-center p-3",children:[Object(d.jsx)("header",{className:"card-header",children:Object(d.jsx)("figure",{className:"card-image",children:Object(d.jsx)("img",{className:"image",src:t.imgURL,alt:""})})}),Object(d.jsxs)("section",{className:"card-content",children:[Object(d.jsx)("h2",{className:"has-text-centered-mobile subtitle mb-1 is-size-3-mobile is-size-4-desktop mb-3",children:t.title}),Object(d.jsx)("p",{className:"has-text-centered-mobile",children:Object(d.jsxs)("small",{className:"tag is-info is-light mb-3",children:["En Stock: ",t.stock]})}),Object(d.jsx)("p",{className:"mb-3",children:t.descripcion}),Object(d.jsx)("p",{className:"has-text-centered-mobile mb-3",children:Object(d.jsxs)("b",{className:"is-size-4-mobile is-size-5-desktop",children:[" $",t.precio," "]})}),Object(d.jsxs)("div",{className:"has-text-centered-mobile",children:[Object(d.jsx)("div",{className:"block mb-3",children:j?Object(d.jsx)(o.b,{to:"/cart",children:Object(d.jsx)("button",{type:"button",role:"link",className:"button is-dark",title:"Add to cart",onClick:function(){var e={product:Object(N.a)({},t),quantity:a};h(e)},children:"Agregar"})}):Object(d.jsx)(U,{count:a,stock:t.stock,onAdd:function(e){return s(a+ +e.target.value)}})}),Object(d.jsx)("div",{className:"block",children:Object(d.jsx)("button",{type:"button",className:"button ".concat(j?"is-warning":"is-success"," is-light"),onClick:function(){return m(!j)},title:j?"Actualize su orden":"Confirme su orden",children:j?"Actualize su orden":"Confirme su orden"})})]})]})]})},W=T((function(e){var t=e.visibility,c=Object(H.g)().productID,i=Object(n.useState)({attributes:{}}),a=Object(r.a)(i,2),s=a[0],o=a[1],l=q(),u=l.showLoader,j=l.hideLoader;return Object(n.useEffect)((function(){u(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";w.collection("products").doc(c).get().then((function(t){return e(S(t))})).catch((function(e){return console.log(e)})).finally(t)}((function(e){return o({attributes:e})}),(function(){return j()}),c)}),[c,u,j]),Object(d.jsx)("div",{className:"section ".concat(t),children:Object(d.jsx)(V,{item:s.attributes})})})),Z=function(){var e=b(),t=e.cart,c=e.getItemsCount,n=e.calculateTotal,i=e.removeItem,a=e.clearCart,s=function(e){var t=e.target.value;i(t)};return Object(d.jsxs)("div",{className:"box",children:[Object(d.jsxs)("div",{className:"is-flex is-align-items-center is-justify-content-space-between mb-3",children:[Object(d.jsx)("p",{className:"is-size-3 p-1 has-text-weight-bold",children:"Tu Carrito"}),Object(d.jsx)("p",{className:"is-size-4 p-1",children:"".concat(c()," ").concat(c()>1?"items":"item")})]}),Object(d.jsxs)("div",{className:"table-container",children:[Object(d.jsxs)("table",{className:"table is-fullwidth has-text-centered is-hoverable is-striped",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"col",children:"Producto"}),Object(d.jsx)("th",{scope:"col",children:"Cantidad"}),Object(d.jsx)("th",{scope:"col",children:"Precio"}),Object(d.jsx)("th",{scope:"col",children:"Subtotal"}),Object(d.jsx)("th",{})]})}),Object(d.jsx)("tbody",{children:t.map((function(e){return function(e){var t=e.product,c=t.id,n=t.title,i=t.price,a=e.quantity;return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:n}),Object(d.jsx)("td",{children:a}),Object(d.jsxs)("td",{children:["$",i]}),Object(d.jsxs)("td",{children:["$",a*i]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("button",{className:"button is-danger is-light mx-2",value:c,title:"Delete order",onClick:s,children:"Borrar"}),Object(d.jsx)(o.b,{to:"/product/".concat(c),children:Object(d.jsx)("button",{role:"link",className:"button is-warning is-light",title:"Edit order",children:"Editar"})})]})]},c)}(e)}))}),Object(d.jsx)("tfoot",{children:Object(d.jsx)("tr",{className:"has-text-center is-size-5",children:Object(d.jsxs)("td",{colSpan:"5",children:["Total: $",n()]})})})]}),Object(d.jsx)("button",{type:"button",className:"button is-danger is-light",title:"Clear cart",onClick:a,children:"Limpiar carrito"})]})]})},K=c.p+"static/media/empty-cart.f2a97bb8.svg",M=function(){return Object(d.jsxs)("div",{className:"container has-text-centered",children:[Object(d.jsx)("h2",{className:"title",children:"Tu carro esta vacio"}),Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)("button",{role:"link",className:"button is-link is-light",children:"Volver a productos"})}),Object(d.jsx)("figure",{children:Object(d.jsx)("img",{className:"mx-auto image",src:K,alt:""})})]})},Q=(c(49),function(e){var t=e.submitHandler;return Object(d.jsxs)("form",{autoComplete:"off",onSubmit:t,children:[Object(d.jsxs)("div",{className:"field",children:[Object(d.jsx)("label",{htmlFor:"fullname",className:"label",children:"Nombre"}),Object(d.jsxs)("div",{className:"control",children:[Object(d.jsx)("input",{className:"input",type:"text",name:"fullname",id:"fullname",pattern:"^[a-zA-Z]+(?:\\s?[a-zA-z]+)+",placeholder:"Nombre",minLength:"3",required:!0}),Object(d.jsx)("p",{className:"help is-link",children:"Tu nombre solo debe contener letras"})]})]}),Object(d.jsxs)("div",{className:"field",children:[Object(d.jsx)("label",{htmlFor:"email",className:"label",children:"E-mail"}),Object(d.jsx)("input",{type:"email",name:"email",id:"email",className:"input",placeholder:"example@email.com",required:!0})]}),Object(d.jsxs)("div",{className:"field",children:[Object(d.jsx)("label",{htmlFor:"telephone",className:"label",children:"Celular"}),Object(d.jsx)("input",{type:"tel",name:"telephone",id:"telephone",className:"input",pattern:"^\\d+\\s{1}\\d{3}-\\d{4}$",placeholder:"123-456-7890",required:!0}),Object(d.jsx)("p",{className:"help",children:"Digito de area y numero"})]}),Object(d.jsx)("div",{className:"field",children:Object(d.jsx)("div",{className:"control",children:Object(d.jsx)("button",{type:"submit",className:"button is-success",children:"Terminar compra"})})})]})}),Y=$((function(){var e=b(),t=e.cart,c=e.clearCart,n=e.calculateTotal,i=e.updateCart,a=q().createNotification;return Object(d.jsx)("div",{className:"container",children:Object(d.jsx)(Q,{submitHandler:function(e){e.preventDefault();var s=function(e){var i,s,r={buyer:{name:e.fullname.value,email:e.email.value,telephone:e.telephone.value},items:t.map((function(e){var t=e.product;return{id:t.id,title:t.title,price:t.price,quantity:e.quantity}})),date:(new Date).toLocaleString(),total:n()};i=r,s=function(e){a("Gracias por su compra \ud83d\ude0a","Su compra a sido exitosa. Id de compra: ".concat(e,"."),"Exitosa",c)},w.collection("orders").add(i).then((function(e){var t=e.id;return s(t)})).catch((function(e){return console.log(e)}))};(function(e){return z.apply(this,arguments)})(t).then((function(t){var c=t.items;t.hasErrorOnSubmit?function(e){a("Error en cargar su orden \ud83d\ude31","algunos de sus productos no estan en stock","Cuidado",(function(){return i(e)}))}(c):s(e.target)}))}})})})),X=(c(50),T((function(e){var t=e.visibility,c=q(),i=c.showLoader,a=c.hideLoader,s=b().hasItemsInCart;return Object(n.useEffect)((function(){i(),setTimeout((function(){return a()}),700)}),[i,a]),Object(d.jsx)("div",{className:"container is-max-desktop p-4 ".concat(t),children:s()?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Z,{}),Object(d.jsx)(Y,{})]}):Object(d.jsx)(M,{})})})));var _=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(o.a,{children:Object(d.jsx)(m,{children:Object(d.jsxs)(F,{children:[Object(d.jsx)(A,{}),Object(d.jsxs)(H.d,{children:[Object(d.jsx)(H.b,{exact:!0,path:["/","/category/:categoryName"],component:R}),Object(d.jsx)(H.b,{exact:!0,path:"/product/:productID",component:W}),Object(d.jsx)(H.b,{exact:!0,path:"/cart",component:X})]})]})})})})};s.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(_,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.1bd787ad.chunk.js.map